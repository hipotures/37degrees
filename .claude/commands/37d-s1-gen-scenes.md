Custom Instruction: Step 1 - Scene Descriptions GeneratorTask OverviewGenerate 25 scene descriptions in YAML format based on book research, ensuring absolute consistency and independence of each scene.Input ParametersBook Title: (e.g., "Wuthering Heights")Author: (e.g., "Emily Brontë")Generator Type: Choose one: narrative, flexible, podcast, atmospheric, or emotional (default: podcast if not specified)Process Steps0. Create Canonical Definitions (MANDATORY First Step)Before any other action, analyze the book research files (37d-*_findings.md and review.md).Identify all major recurring characters and key, repeated locations that will appear in multiple scenes.For EACH recurring element, create a "canonical description block" in valid YAML format. These blocks are the single source of truth for the entire generation process.Canonical Character Example:# Canonical block for a main character
- name: "Stanisław Wokulski" # Internal name for your reference
  description_block: |
    characters:
      - appearance: "Man in his late 40s, powerful and stocky build, with a thoughtful, often melancholic expression. Possesses a prominent reddish mustache and hair showing first signs of graying at the temples."
        clothing: "Impeccably tailored, dark frock coat of a wealthy 19th-century merchant, crisp white shirt, and silk cravat, reflecting his status but worn without aristocratic flair."
        posture: "Confident and upright, but with a tension in his shoulders suggesting inner conflict."
Canonical Location Example:# Canonical block for a main location
- name: "Wokulski's Store" # Internal name for your reference
  description_block: |
    setting:
      location: "Prestigious commercial thoroughfare Krakowskie Przedmieście in Warsaw, Congress Poland under Russian partition."
    mainElements: "Grand storefront with large, polished glass windows displaying luxury goods. The interior is opulent, with dark wood counters, brass fittings, and shelves stacked high with merchandise from across Europe."
    atmosphere: "A bustling hub of commerce, filled with wealthy clientele, the air smelling of expensive soaps, leather, and colonial spices."
Action: Generate these canonical blocks for ALL main characters and locations first. This is your "Master Key" for consistency. You will use these blocks verbatim in Step 4.1. Validate Generator Type and Locate Book DirectoryIf no generator type is provided, inform user: "No generator type specified. Using default: podcast"Validate generator type is one of: narrative, flexible, podcast, atmospheric, or emotionalRead docs/STRUCTURE.md to understand project structureFind book directory by searching for book title/author in books/ directoriesIdentify book number and path (e.g., books/0037_wuthering_heights/)2. Load Templates and GuidelinesScene Structure:Read and analyze config/prompt/scene-description-template.yamlStudy the YAML structure, field names, and data typesUnderstand all required and optional fieldsNote any comments and length recommendations within the templateGenerator File: Read and analyze ONLY ONE generator file based on the chosen generator type:If narrative: Read config/prompt/scene-generator/narrative-prompt-generator.mdIf flexible: Read config/prompt/scene-generator/flexible-prompt-generator.mdIf podcast: Read config/prompt/scene-generator/podcast-image-prompt-generator.mdIf atmospheric: Read config/prompt/scene-generator/atmospheric-moments-generator.mdIf emotional: Read config/prompt/scene-generator/emotional-journey-generator.mdIMPORTANT: Read ONLY the file corresponding to the selected generator type.Study the selected generator thoroughly to understand its specific approach and guidelines.3. Analyze Book ResearchNavigate to books/[book_dir]/docs/ directory, this is your search directory!Read ONLY files matching the pattern 37d-*_findings.md and the file review.md.These files contain all necessary book analysis and insights.Extract themes, characters, historical context, and key discoveries from these findings files.4. Check Existing Files and Generate Scene SetBefore generating:Check if any scene files already exist in /prompts/scenes/[generator_type]/If scene_01.yaml exists, read ALL existing scene files to understand the story so far.Find the first missing scene number (e.g., if scenes 1-15 exist, start from scene 16).If all 25 scenes already exist, STOP and inform user: "All 25 scenes already exist. Delete existing files if you want to regenerate."Generate missing scenes:Refer to the Canonical Definitions created in Step 0.When a scene requires a recurring character or location, you MUST copy the entire description_block from the canonical definition verbatim.You can add context-specific details in other fields like details or actions (e.g., "His face is now pale with anger" or "The store is now empty and dark"), but the core descriptions for appearance, clothing, and location MUST be pasted directly from the canonical block.CRITICAL: DO NOT rewrite, summarize, or alter the canonical descriptions. COPY-PASTE them.Apply the guidelines from the chosen generator file to build the narrative around these consistent blocks.Save only the missing scenes to /prompts/scenes/[generator_type]/5. Output StructureCreate directories if they don't exist and save to:books/[book_number]_[book_name]/prompts/scenes/[generator_type]/
  ├── scene_01.yaml
  ├── scene_02.yaml
  └── ... (25 files total)
Critical Safety Rule: NEVER delete or overwrite existing files. Only create files that don't already exist.6. YAML FormatEach file must match scene-description-template.yaml structure exactly.7. Verification for Cross-References - MANDATORYAfter generating all scenes, you MUST perform verification:First Verification (Automated Search):Use grep/search to find any remaining relative cross-references.Search for patterns like: "same.*from", "same.*scene", "previous.*scene", "earlier.*scene", "from scene", "scene [0-9]".If ANY are found, it's a critical failure. Fix them immediately by replacing them with full, standalone descriptions.Second Verification (Canonical Cross-Check):For every scene, compare the character and location descriptions with the Canonical Definitions from Step 0.Verify that the description in the scene is an EXACT MATCH of the canonical block.Any deviation (other than allowed additions in other fields) must be corrected by pasting the canonical block again. This ensures both independence and consistency.8. Location Completeness Verification - MANDATORYAfter cross-reference verification, you MUST verify location completeness:Location Completeness Check:Use grep/search to find incomplete location descriptions.Verify each location has full geographical/cultural context.Common Location Problems to Fix:❌ INCOMPLETE LOCATIONS:location: "Warsaw cityscape"
location: "Aristocratic estate" 
✅ COMPLETE LOCATIONS:location: "Polish capital Warsaw under Russian partition, view from Vistula River valley"
location: "Polish manor house in Mazovian countryside, 50km from Warsaw"
Rule: Every location must be self-explanatory, including geographical and historical context when relevant.9. Time Completeness Verification - MANDATORYAfter location verification, you MUST verify time completeness based on book content:Time Completeness Check:Verify each time element is supported by book content.CRITICAL RULE: All time elements must derive from book content - never add arbitrary temporal details.Common Time Problems to Fix:❌ ARBITRARY TIME DETAILS:time: "1878 spring, morning" # If spring not specified in book
✅ BOOK-SUPPORTED TIME:time: "1878, morning" # If only year and time of day known
Rule: Every time detail must be traceable to book content.Important GuidelinesLANGUAGE: All scene descriptions MUST be in English.PERSPECTIVE: Write as a neutral, first-time observer. Describe what is visually present, not plot context.LOCATIONS: Each scene must include FULL, self-contained location context.CHARACTERS: Every character in every scene must have a complete description (age, hair, build, etc.).EMOTIONS & ABSTRACT CONCEPTS: Use only physical, visible elements. Translate feelings into actions (e.g., "determination on face" -> "furrowed brow, clenched fists").CLOTHING: Be specific about period garments (e.g., "brown wool vest, white linen shirt").NO PROPRIETARY NAMES: Replace fictional names of places, buildings, or ships with descriptive terms (e.g., "medieval fortress" instead of "Castle Blackstone").NO STORY REFERENCES: Never mention what happened before or will happen after. Each scene stands alone.SCENE INDEPENDENCE - CRITICAL: Each scene must be 100% independent. No cross-references.SIMPLE VISUAL LANGUAGE: Write like describing a photograph.PHYSICAL ELEMENTS ONLY: Describe what a camera lens would capture. Translate abstract concepts into physical manifestations (e.g., "a choice" -> "two diverging paths").Follow the exact structure and field requirements from scene-description-template.yaml.Do NOT define visual style (colors, artistic technique, rendering style) - only describe WHAT is in the scene.Examples of Scene Independence Violations and CorrectionsCharacter Descriptions❌ WRONG:appearance: "Same writer from scene 5, now gaunt and desperate"
✅ CORRECT:appearance: "Man, late 30s, dark hair, gaunt and desperate, wild-eyed"
Location Descriptions❌ WRONG:mainElements: "Same park setting as opening scene"
✅ CORRECT:mainElements: "Moscow park setting with ornamental pond, tree-lined paths"
Time References❌ WRONG:time: "Several weeks after scene 5"
✅ CORRECT:time: "1930s Moscow, late evening, autumn"
Key Principles:Always describe characters fully - age, hair, build, current state.Always specify complete locations - city, specific place, architectural details.Never reference other scenes - no "same", "previous", "from scene X".Treat each scene as standalone - viewer knows nothing about other scenes.Use absolute time references - specific era, time of day, season.
